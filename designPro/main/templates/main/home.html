{% extends 'main/base.html' %}

{% block title %}Главная - Design.pro{% endblock %}

{% block content %}
<div class="row">
    <div class="col-full">
        <div class="card">
            <h2>Добро пожаловать в Design.pro</h2>
            <p>Создайте заявку на дизайн интерьера и получите профессиональные варианты оформления.</p>
            {% if user.is_authenticated %}
                <!-- Если пользователь авторизован -->
                <a href="{% url 'profile' %}" class="btn btn-primary">Перейти в личный кабинет</a>
                {% if user.is_superuser %}
                    <!-- Дополнительно для администратора -->
                    <a href="{% url 'superadmin' %}" class="btn btn-info">Админка</a>
                {% endif %}
            {% else %}
                <!-- Если пользователь не авторизован -->
                <a href="{% url 'register' %}" class="btn btn-success">Зарегистрироваться</a>
                <a href="{% url 'login' %}" class="btn btn-outline">Войти</a>
            {% endif %}
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md">
        <div class="card">
            <div class="card-header">
                <h3>Статистика</h3>
            </div>
            <div class="card-body">
                <p>Заявок в работе: <strong>{{ in_progress_count }}</strong></p>
            </div>
        </div>
    </div>
</div>

<div class="row mt-2">
    <div class="col-full">
        <div class="card">
            <div class="card-header">
                <h3>Последние выполненные работы</h3>
            </div>
            <div class="card-body">
                {% if completed_requests %}
                    <div class="grid grid-cols-4 gap-2">
                        {% for req in completed_requests %}
                            <div class="work-item">
                                <h4>{{ req.title }}</h4>
                                <p>{{ req.category.name }}</p>
                                <p><small>{{ req.created_at|date:"d.m.Y H:i" }}</small></p>
                                {% if req.image %}
                                    <img src="{{ req.image.url }}" class="request-image" alt="Фото помещения">
                                {% endif %}
                            </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <p>Выполненных работ пока нет.</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}